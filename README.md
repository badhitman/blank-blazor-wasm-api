# Конструктор
Инструмент создания/описания бизнес-моделей через WEB интерфейс.

Ролик на YouTube: описание сборки проекта из консструктора в конечную программу.
[![Ссылка на видео:](https://img.youtube.com/vi/mYbymhW5Yjo/0.jpg)](https://youtu.be/mYbymhW5Yjo)

Если коротко (резюме):

1. Решение состоит из двух веток: "constructor" и "main". Ветка "constructor" опубликована:
	[https://iq-s.pro](https://iq-s.pro/ "актуальная ветка конструктора доступна онлайн, но её можно развернуть самостоятельно")
2. Базовая ветка "main" включает в себя только авторизацию. Эта ветка заточена под интеграцию в неё "комплекта кода" из "конструктора".
3. "Конструктор" позволяет описать структуру/модели базы данных информацинной системы через web-интерфейс. Над конструированием могут работать сразу несколько человек.
   В "конструкторе" не потребуется программировать. Программист должен будет наблюдать и, вероятно, корректировать то что создадут простые пользователи, 
   но в принципе с "конструктором" справится любой (аналитик или простой пользователь).
4. В конструкторе создаются/описываются перечисления и сложные объекты (документы) с произвольной структурой полей/свойств. 
	Поля/свойства документов могут иметь произвольный тип: число, строка, дата/время, перечисление или ссылка на другой документ.
5. В документе помимо простых полей/свойств могут быть и табличные части.
	> Простое поле это значение (строка, число, булево, дата/время) или ссылка на сущность (перечисление или другой документ). Связь "один к одному"
	
	> Табличная часть - это коллекции ссылок на другие (подчинённые) документы. Описываются отдельные документы, которые связаны к вашим документом и имеют связь "один ко многим".
6. Готовую информационную систему можно выгрузить как контекст базы данных с набором всех моделей и служб для интеграции в **"main"**.
	Использовать готовые службы совсем не обязательно. Результат конструирования можно использовать как источник контекста базы данных.
	В этом смысле конечная информационная система может быть ни как ни связана с .NET/C#.
	> вполне воозможно, когда конструктор будет использоваться только как конструктор базы данны для Entity Framework (Code First). 
	> С такой базой данных можно работать не касаясь .NET, но имея в своём распоряжении возможности простого конструирования схемы БД и EF миграций.
7. Контструктор кроме непосредственного контекста базы данных сгенерирует для созданных моделей наборы служб работы с данными (crud). 
	Есть наборы служб (и контроллеров) для бэка, а так же комплект refit служб для размещения на клиенте. 
	После полной интеграции в **"main"** останется сделать Blazor UI и уже на этом этапе иметь частично готовую информационную систему.
	Готовой в значительной части готовности такой продукт назвать нельзя, но вместе с тем большой объём рутинной работы выполнять не прийдётся.

Пример результат работы код-генератора конструктора: [ссылка](https://github.com/badhitman/blank-blazor-wasm-api/tree/constructor/demo-project-codebase)
> структура была сгенерирована системой наполнения демо данными. Поэтому имена типов данных предельно простые (name1, name2 и т.д.)

Специальный условный символ компиляции в проекте **DbLayerLib** 
![ДЕМО режим](./img/demo-preprocessor-directive.png)
активирует загрузку db демо данными в
![has demo data](./img/has-demo-data.png)

> ВАЖНО! данный препроцессор так же вызывает `EnsureDeleted()`

Для удобства отладки в UI **BlazorWasmApp** поддерживается тот же символ, но для отображения упрощённого входа в аккаунт (вход одним кликом по кнопке):
![demo login](./img/demo-login.png)
Этот акаунт (login:222222222 passw:222222222) создаётся в **DbLayerLib**, если ему назначить этот препроцессор **DEMO**